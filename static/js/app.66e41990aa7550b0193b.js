webpackJsonp([2,0],[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var o=n(42),i=a(o),l=n(102),s=a(l),u=n(107),r=a(u),d=n(45),c=a(d);n(95),n(89),n(94),i["default"].use(r["default"]),new i["default"]({store:c["default"],el:"body",components:{App:s["default"]},data:{}})},,,,,,,,,function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadFile=t.renameFile=t.editContent=t.saveXGZ=t.createNewXGZ=void 0;var i=n(28),l=o(i),s=n(23),u=o(s),r=n(26),d=a(r),c=n(22),f=o(c),p=(t.createNewXGZ=function(e,t){var n=e.dispatch,a=e.state;console.log("Creating new XGZ"),n(d.NEW_FILE),u["default"].saveXgzFile(a.xgzfile,t).then(function(e){return n(d.FILE_SAVED,e.result)},function(e){return n(d.FILE_NOT_SAVED)})},t.saveXGZ=function(e){var t=e.dispatch,n=e.state;return console.log("Saving new XGZ"),t(d.FILE_SAVING),new l["default"](function(e,a){u["default"].saveXgzFile(n.xgzfile).then(function(n){t(d.FILE_SAVED,n.result),e()},function(e){t(d.FILE_NOT_SAVED),a(e)})})}),m=f["default"].debounce(p,5e3);t.editContent=function(e,t){var n=e.dispatch,a=e.state;console.log("Editing XGZ content: "+t.target.value),n(d.EDIT_CONTENT,t.target.value),m({dispatch:n,state:a})},t.renameFile=function(e,t){var n=e.dispatch,a=e.state;console.log("renaming XGZ"),n(d.RENAME_FILE,t),m({dispatch:n,state:a})},t.loadFile=function(e,t){var n=e.dispatch;n(d.LOAD_FILE,t)}},,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(51),i=a(o),l=n(28),s=a(l),u=n(29),r=a(u),d=n(30),c=a(d),f=n(44),p=a(f),m=function(){function e(){(0,r["default"])(this,e),console.log("CONSTRUCTING GApi!!!!"),this.CLIENT_ID="YOUR-CLIENT-ID",this.SCOPES=["email","profile","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.install","https://www.googleapis.com/auth/plus.login"],this.DEFAULT_FIELDS="capabilities(canCopy,canEdit),createdTime,fileExtension,id,mimeType,modifiedTime,name,shared,size,version"}return(0,c["default"])(e,[{key:"loadDriveApis",value:function(){return new s["default"](function(e,t){!function n(){console.log("loadDriveApi..."),gapi&&gapi.client?s["default"].all([gapi.client.load("drive","v3"),gapi.client.load("plus","v1")]).then(function(){console.log("gapi.client.load finished!!"),e()}):(setTimeout(function(){return n()},10),console.log("wait for it..."))}()})}},{key:"authorize",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]||arguments[0],n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return console.log("authorize"),new s["default"](function(a,o){gapi.auth.authorize(e.buildAuthRequest(t,n),function(e){e&&!e.error?(console.log("resolved!"),a()):(console.log("rejected!"),o())})})}},{key:"buildAuthRequest",value:function(e,t){var n={client_id:this.CLIENT_ID,scope:this.SCOPES.join(" "),immediate:e};return t&&(n.login_hint=t,n.authuser=-1),n}},{key:"getUserProfile",value:function(){return gapi.client.plus.people.get({userId:"me"})}},{key:"saveXgzFile",value:function(e,t){var n,a;e.metadata.id?(n="/upload/drive/v3/files/"+encodeURIComponent(e.metadata.id),a="PATCH"):(n="/upload/drive/v3/files",a="POST");var o={mimeType:e.metadata.mimeType,name:t||e.metadata.name},l=(new p["default"]).append("application/json",(0,i["default"])(o)).append(e.metadata.mimeType,e.content).finish();return gapi.client.request({path:n,method:a,params:{uploadType:"multipart",fields:this.DEFAULT_FIELDS},headers:{"Content-Type":l.type},body:l.body})}},{key:"combineAndStoreResults",value:function(e,t){var n={metadata:e,content:t};return n}},{key:"loadFile",value:function(e){var t=this;return new s["default"](function(n,a){var o=gapi.client.drive.files.get({fileId:e,fields:t.DEFAULT_FIELDS}),i=gapi.client.drive.files.get({fileId:e,alt:"media"});n(s["default"].all([o,i]))}).then(function(e){return{metadata:e[0].result,content:e[1].body}})}}]),e}();t["default"]=new m},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={state:{name:"",image:"",email:""},setUser:function(e){this.state.name=e.name,this.state.image=e.image,this.state.email=e.email}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS_LIST=void 0;var o,i=n(52),l=a(i),s=n(22),u=a(s),r=n(26),d=t.STATUS_LIST={INITIAL:"INTIAL",SAVING:"SAVING",SAVED:"SAVED",NOT_SAVED:"NOT_SAVED",DIRTY:"DIRTY"},c={metadata:{name:"New XGZ document"},content:"",status:d.INITIAL},f=(o={},(0,l["default"])(o,r.NEW_FILE,function(e,t){e.metadata={id:null,mimeType:"application/file-xgz",name:t},e.content=""}),(0,l["default"])(o,r.FILE_SAVED,function(e,t){u["default"].assign(e.metadata,t),e.status=d.SAVED}),(0,l["default"])(o,r.FILE_NOT_SAVED,function(e){e.status=d.NOT_SAVED}),(0,l["default"])(o,r.FILE_SAVING,function(e){e.status=d.SAVING}),(0,l["default"])(o,r.EDIT_CONTENT,function(e,t){e.content=t,e.status=d.DIRTY}),(0,l["default"])(o,r.RENAME_FILE,function(e,t){e.metadata.name=t,e.status=d.DIRTY}),(0,l["default"])(o,r.LOAD_FILE,function(e,t){e.metadata=t.metadata,e.content=t.content,e.status=e.status=d.SAVED}),o);t["default"]={state:c,mutations:f}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NEW_FILE="NEW_FILE",t.FILE_SAVED="FILE_SAVED",t.FILE_SAVING="FILE_SAVING",t.FILE_NOT_SAVED="FILE_NOT_SAVED",t.EDIT_CONTENT="EDIT_CONTENT",t.RENAME_FILE="RENAME_FILE",t.LOAD_FILE="LOAD_FILE"},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(29),i=a(o),l=n(30),s=a(l),u=function(){function e(){(0,i["default"])(this,e),this.boundary=Math.random().toString(36).slice(2),this.mimeType='multipart/mixed; boundary="'+this.boundary+'"',this.parts=[],this.body=null}return(0,s["default"])(e,[{key:"append",value:function(e,t){if(null!==this.body)throw new Error("Builder has already been finalized.");return this.parts.push("\r\n--",this.boundary,"\r\n","Content-Type: ",e,"\r\n\r\n",t),this}},{key:"finish",value:function(){if(0===this.parts.length)throw new Error("No parts have been added.");return null===this.body&&(this.parts.push("\r\n--",this.boundary,"--"),this.body=this.parts.join("")),{type:this.mimeType,body:this.body}}}]),e}();t["default"]=u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(42),i=a(o),l=n(108),s=a(l),u=n(25),r=a(u);i["default"].use(s["default"]),console.log("USED VUEEEEEEEEEXXXX"),i["default"].config.debug=!0;var d=!1;t["default"]=new s["default"].Store({modules:{xgzfile:r["default"]},strict:d})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(96),i=a(o),l=n(9),s=n(105),u=a(s),r=n(103),d=a(r),c=n(104),f=a(c),p=n(23),m=a(p),v=n(24),_=a(v);t["default"]={components:{PageHeader:u["default"],TextView:f["default"],"create-new-xgz-dialog":d["default"]},data:function(){return{user:null,file:null}},vuex:{actions:{loadFile:l.loadFile}},attached:function(){var e=this;console.log(m["default"]);var t=i["default"].parse(window.location.search);console.log(t),this.user=t.user,this.file=t.file,m["default"].loadDriveApis().then(function(){console.log("starting authorize"),m["default"].authorize(!0,e.user).then(function(){e.loadUserData(),e.loadThisFile()})["catch"](function(t){console.log("error inload or authorize"),e.$refs.login.open()})})},methods:{handleAuthClick:function(){var e=this;this.$refs.login.close(),m["default"].authorize(!1,this.user).then(function(){e.loadUserData(),e.loadThisFile()})},loadUserData:function(){console.log("load userData"),m["default"].getUserProfile().then(function(e){console.log(e),_["default"].setUser({name:e.result.displayName,image:e.result.image.url,email:e.result.emails[0].value})})},loadThisFile:function(){var e=this;console.log("load file"),this.file?m["default"].loadFile(this.file).then(function(t){console.log("GOT FILE!!!!!!"),console.log(t),e.loadFile(t)}):this.openCreateNewXGZ()},openCreateNewXGZ:function(){this.$refs.create_new.openDialog()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(9);t["default"]={data:function(){return{filename:"New XGZ document"}},vuex:{actions:{createNewXGZ:a.createNewXGZ}},methods:{openDialog:function(){this.filename="New XGZ document",this.$refs.create_new_xgz.open()},createNew:function(){this.$refs.create_new_xgz.close(),this.createNewXGZ(this.filename)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(9);t["default"]={vuex:{getters:{fileContent:function(e){return e.xgzfile.content}},actions:{editContent:a.editContent}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),i=a(o),l=n(43),s=a(l),u=n(106),r=a(u),d=n(9),c=n(25);t["default"]={components:{ProfileMenu:r["default"]},data:function(){return{}},vuex:{getters:{fileStatus:function(e){switch(console.log(e.xgzfile.status),console.log(c.STATUS_LIST.SAVED),e.xgzfile.status){case c.STATUS_LIST.INTIAL:return"New file";case c.STATUS_LIST.SAVING:return"Saving...";case c.STATUS_LIST.SAVED:return"Last change on "+e.xgzfile.metadata.modifiedTime;case c.STATUS_LIST.NOT_SAVED:return"Could not save to drive";case c.STATUS_LIST.DIRTY:return"Not saved"}},fileName:function(e){return e.xgzfile.metadata.name}},actions:{renameFile:d.renameFile}},methods:{rename:function(e){this.renameFile(e.target.value)},openCreateNewXGZ:function(){window.open("http://exegesistool.dev:8080/","_blank"),this.closeNav()},closeNav:function(){setTimeout(function(){var e=document.querySelector(".mdl-layout");i["default"].findIndex(e.classList,"is-visible")&&e.MaterialLayout.toggleDrawer()},100)}},ready:function(){console.log(this.$els),(0,s["default"])(this.$els.filename)}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),i=a(o);t["default"]={data:function(){return{user:i["default"].state}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,function(e,t){e.exports=' <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header"> <page-header></page-header> <main class="mdl-layout__content mdl-color--grey-100"> <div class=page-content> <div class=mdl-grid> <div class="mdl-cell mdl-cell--2-col" id=left-tools> </div> <div class="mdl-cell mdl-cell--8-col" id=text-view> <text-view></text-view> </div> <div class="mdl-cell mdl-cell--2-col" id=right-tools> </div> </div> <mdl-dialog v-ref:login full-width title="Hi there"> <p>Please log in</p> <template slot=actions> <mdl-button primary @click=handleAuthClick>Login</mdl-button> <mdl-button @click=$refs.login.close>Close</mdl-button> </template> </mdl-dialog> <pre id=output></pre> </div> </main> <create-new-xgz-dialog v-ref:create_new></create-new-xgz-dialog> </div> '},function(e,t){e.exports=' <mdl-dialog v-ref:create_new_xgz full-width title="Create new XGZ"> <mdl-textfield floating-label="File name" :value.sync=filename></mdl-textfield> <template slot=actions> <mdl-button primary raised @click=createNew()>Create</mdl-button> </template> </mdl-dialog> '},function(e,t){e.exports=' <header class="mdl-layout__header mdl-color--grey-100 mdl-color-text--grey-600"> <div class=mdl-layout__header-row> <i class=material-icons>short_text</i> <input class=filename contenteditable=true @blur=rename :value=fileName v-el:filename/> <span class=filestatus>{{ fileStatus }}</span> <div class=mdl-layout-spacer></div> <nav class="mdl-navigation mdl-layout--large-screen-only"> <profile-menu></profile-menu> </nav> </div> </header> <div class=mdl-layout__drawer> <span class=mdl-layout-title> </span> <nav class=mdl-navigation> <profile-menu></profile-menu> <a class=mdl-navigation__link @click=openCreateNewXGZ>New</a> </nav> </div> '},function(e,t){e.exports=' <div class=demo-avatar-dropdown _v-36a1631e=""> <img class=avatar v-bind:src=user.image _v-36a1631e=""> <span _v-36a1631e="">{{ user.email }}</span> <button id=accbtn class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" _v-36a1631e=""> <i class=material-icons role=presentation _v-36a1631e="">arrow_drop_down</i> <span class=visuallyhidden _v-36a1631e="">Accounts</span> </button> <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for=accbtn _v-36a1631e=""> <li class=mdl-menu__item _v-36a1631e="">logout</li> </ul> </div> '},function(e,t){e.exports=' <textarea :value=fileContent @input=editContent _v-ee3b5baa=""></textarea> '},function(e,t,n){var a,o;n(90),a=n(46),o=n(97),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var a,o;a=n(47),o=n(98),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var a,o;n(93),a=n(48),o=n(101),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var a,o;n(91),a=n(49),o=n(99),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var a,o;n(92),a=n(50),o=n(100),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)}]);
//# sourceMappingURL=app.66e41990aa7550b0193b.js.map